<!DOCTYPE html>
<html>
  <head>
    <title>iOS-kurs</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="https://github.com/downloads/gnab/remark/remark-0.3.4.min.js" type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<script src="https://github.com/downloads/kjbekkelund/remark-bekk/bekk-0.0.3.js" type="text/javascript"></script>
	<link href="https://github.com/downloads/kjbekkelund/remark-bekk/bekk-0.0.3.css" type="text/css" rel="stylesheet">

<style>
	.max-width img {
		width: 100%;	
	}

	.max-height img {
		height: 100%;
	}
</style>
  </head>
  <body>
    <textarea id="source">

# Forslag til beskrivelse

Få en pangstart på din karriere som app-utvikler. BEKK holder tre-delt iOS-kurs, der du vil få den grunnleggende kunnskapen som skal til for å lage en iOS-app fra bunnen av. 

Del 1 gir introduksjon til Objective-C, iOS platformen og verktøy. Det blir holdt presentasjon og det skal kodes.
Del 2 går mer i dybden på temaene i del 1 og vi vil lage en twitter-aktig app.
Del 3 vil gå ut på å lage en applikasjon fra bunnen av som bruker egne API'er eller foreslåtte API'er. Veileder vil hjelpe til underveis. 

Krav:
Mac med Xcode

Oppsett før man dukker opp på del 1:
Installert: Xcode (4 eldste, men jo nyere jo bedre, 4.5 er siste)
Åpnet Xcode for å vite at det starter

Om man får tid se kjapt på: http://cocoadevcentral.com/articles/000081.php

---

.front-page
# iOS-kurs 

---

# Tredelt kurs

* Del 1 - Introduksjon
	* Objective-C
	* iOS
	* Verktøy
	* Koding og blir kjent med verktøyene
* Del 2 - Mer avansert
	* Objective-C
	* iOS - Standard komponenter
	* Koding - Vi skal lage en twitter aktig app
* Del 3 - Lage en app
	* iOS - Standard komponenter
	* Debugging
	* Verktøy, alternativer og forslag
	* Bøker og ressurser
	* Utvikle på egen app eller forsette med twitter klone med hjelp fra veilederne

---

.middle.center
# Del 1

---

.agenda
# Agenda

* Objective-C
* iOS
* Verktøy
* Koding og bli kjent med verktøyene

---

.middle.center
# Objective-C

---

# Hva er Objective-C?
* Objective-C er ett sett med utvidelser til programmeringsspråket C
* Man kan blande Objective-C med C og C++ (Obj++)
* Objektorientert, mer om Apple sin tolkning av dette finner du på:
	* http://developer.apple.com/iphone/library/documentation/ Cocoa/Conceptual/OOP_ObjC
* Enkelt språk, men litt rar syntax
	* http://goo.gl/TNPO9
* Dynamisk typet runtime

---

# C på så få minutter som mulig

* "Primitivt" i forhold til nyere språk
  * Ikke objektorientert
  * Strings er et ukjent fenomen
* Ingen garbage collection
  * Allokere minne før man bruker det
  * Deallokere minne når man er ferdig
* Lite overhead - blazing fast



.c
	int main()
	{
		int this_is_a_number;

		printf( "Vennligst skriv inn ett nummer: " );
		scanf( "%d", &this_is_a_number );
		printf( "Du skrev inn %d", this_is_a_number );
		getchar();
		return 0;
	}

---

# Objective-C Klasser og Objekter

<!--- Som i mange andre programmeringsspråk så lager man egne objekter ved hjelp av klasser og klassene igjen inneholder andre objekter. 

I tillegg til å holde på sine instans variabler, så inneholder klassene forskjellige metoder. I Objetive-C så bruker man stor forbokstav på klasser, men små bokstaver på instanser av denne klassen. 

Det noe av metode og instans variable definering blir gjort i en .h fil, men all implementasjonen blir gjort i en .m fil.

NSObject er en root klasse som alle andre klasser arver fra. 

# Objective-C Objekter

Da Objetive-C er objektorientert, vil de samme prinsippene gjelde her som i andre objektorienterte språk, som for eksempel Java. 

Objektene har data og metoder for å bruke dataen, den dataen som blir påvirket ligger i såkalte instans-variabler (Ivars). 

Da språket er dynamisk typet, kan alle objekter refereres til ved hjelp av 'id'. For eksempel:


.objective-c
	id ettObjekt 

Det betyr også, at man må vœre litt mer varsom enn i java, da man ikke får kompileringsfeil ved å sende inn en feil type til en metode.

-->

* Man lager egne objekter ved å definere klasser
* Klassene inneholder som regel instans-variabler for å ta vare på klassens data
* Manipulering av instans-variablene skjer ved hjelp av metoder
* Stor forbokstav for klasser og små for instanser av denne klassen
* En klasse består av en .h-fil og en .m-fil
	* h.-filen definerer som regel instans variablene og public metoder
	* m.-filen inneholder all implemtasjon

---

# Klasse og instansmetoder

* Instansmetoder defineres på følgende måte



.objective-c
	- (id)init //Gjør initialiseringen som kreves av et objekt for å bli klart

* Klasse metoder defineres på følgende måte



.objective-c
	+ (id)alloc //Allokerer en plass i minne til objektet


* Opprette instans av en klasse gjøres på følgende måte:



.objective-c
	Person *person = [[Person alloc] init];

* `[[Person alloc] init]`, og alle metoder som starter med `init` kan sees på som konstruktører

---

# Objective-C ivar

<!-- 

I Objective-C er alle instans variabler interne (@protected) for klassen de er definert i. Dermed er staten til instans-variablene kun tilgjengelig via klassens metoder eller en klasse som har arvet av den klassen der instans-variablene er definert. Man kan overstyre dette ved å bruke 'scope directives'.

--> 

* Alle instans-variabler deklarert i .h-filen er automatisk interne (@protected)
* Kan overstyres ved hjelp av 'scope directives'



.objective-c
	/* Instans variabelen er bare tilgjengelig inne i klassen som deklarerer den */
	@private 
	NSString * ettObjekt;

	/* Instans variabelen er tilgjengelig i klassen som 
	deklarer den og for klasser som arver av den klassen */
	@protected 
	NSString * ettObjekt;
	
	/* Instans variabelen er tilgjengelig for alle */
	@public 
	NSString * ettObjekt;

	/* Kun tilgjengelig for klasser som ligger i ett og samme image. */
	@package	
	NSString * ettObjekt;

---


# Objective-C Message Passing

* I Objetive-C kaller man ikke metoder på objekter, men sender en beskjed
* Navngir ikke selve funksjonen, men hvert parameter til funksjonen.
* Skriver metoder mer som om man snakker til objektet

Java


.java
	person.doSomething(parameter1, parameter2);

	Person.doSomethingElse(parameter1);

	String fullName = Person.fullName();


Objective-C


.objetive-c
	[person doSomethingWith:parameter1 and:parameter2];

	[Person doSomethingWith:parameter1];
	
	NSString *fullName = [person fullName];

---

# Metoder og kall eksempler

* Et eksempel på hvordan en typisk klasse kan se ut og hvordan man kaller metoder på en instans av denne klassen



.objective-c

	Person *person = [Person alloc] init];
	- (NSString *)fullName;
	// NSString *fullName = [person fullName];

	- (int)age
	// int age = [person age];

	- (void)setAge(int)age;
	// [person setAge:25];

	- (BOOL)hasDrivingLicence;
	// if ([person hasDrivingLicence]) 
	// {
	//	  //drive car
	// }


---

# Terminologi

* Message expression



.objective-c
	[person setAge:25];

* Message



.Objective-C
	setAge:25

 * Selector 



.objective-c
	setAge:

* Method - Koden valgt av bedskjeden

---

# Objective-C ivar og properties

* Properties er en effektiv måte og lage en get og set metode for instans-variabler (ivars)
* I nyere Objective-C trenger man ikke definere ivars om man definerer properties, da de blir automatisk laget om det ikke finnes en matchende ivars til property navnet



.objective-c
	@property(nonatomic, strong) Person *person;
	@property(nonatomic) int promille;

	// Klassen har nå propertiene 'person' og 'promille',
	// med tilhørende settere og gettere
	

---

#Properties continued

Properties kan også ha attributes, som sier hva som skal skje når den aksesseres

* Tilgjengelighet
 	- __readonly__: propertien får kun en getter
 	- __readwrite__: propertien får både en getter og en setter (default)
* Hvordan setteren skal fungere
	- __strong__: denne klassen eier propertien, og styrer minnehåndtering
	- __weak__: denne klassen eier _ikke_ propertien, og styrrer derfor _ikke_ minnehåndteringen
	- __copy__: en kopi av objektet vil bli brukt ved assignment
	- __assign__: setter verdien direkte. Brukes ofte på primitiver
* Trådsikkerhet
	- __atomic__ : Default, men bør brukes skjelden da den er trengere. Har tilleggsfunksjonalitet som gjør at man alltid returnerer ett helt objekt når flere tråder snakker med setter og getter
	- __nonatomic__ : Trådsikkerhet er dust, bruke nonatomic.

---

# Dot Syntax

* En alternativ måte å kalle tilgangsmetoder (accessor methods, get, set)



.objective-c
	NSString *fullName = person.fullName;
	person.age = 25;
	person.sibling.age = 27;

* i stedet for



.objective-c
	NSString *fullName = [person fullName]; 
	[person setAge:25];
	[person sibling] setAge:27];

---


# Dynamisk eller statisk?

* Objective-C har en dynamisk typet runtime, men man kan velge å bruke statiske typer når man skriver koden.



.objetive-c
	id person //dynamisk typet
	Person *person //statisk typet

* Statisk typing er kun til for å gi deg typesikkerhet compile time; alle spor forsvinner etter kompilering
* Hvis vi ser på initializerne ser vi at de _alltid_ returnerer `id`. 
* `id` er definert som en pointer til hva som helst

<!--* Runtime bryr Objective-C seg ikke om statiske typer
* Statiske typer gir typesjekking compile time-->

---

# Nil

* Først og fremst, _hva er disse * overalt?_
	* Det er hvordan man definerer en peker til minnet
	* Ved bruk av id bruker man ikke * da den har en peker automatisk
* I Objective-C bruker man nil, i stedet for null som i mange andre språk
* Forskjellen er at man kan kalle metoder på nil uten at man kræsjer eller får exceptions
* Om man kaller en metode på nil får man bare nil tilbake



.objetive-c
    NSString *string = nil;
	NSString *low = [string lowercaseString];
    NSLog(@"%@", low);

* Dette vil logge (null) uten å krœsje

---

# Objective-C Minnehåndtering (bye bye)

* MRC (Manual Reference Counting)



.objective-c
	- (void)morroMetoden
	{ 
		NSMutableArray *vanligArray = [[NSMutableArray alloc] init];
		//bruk array'et
		[vanligArray release];
		//slett det fra minnet når du er ferdig
	}



* Garbage Collection (ligner på Java sin, droppes i Mountain Lion til fordel for ARC og finnes ikke i iOS)
* ARC (Automatic Reference Counting)



.objective-c
	- (void)morroMetoden
	{ 
		NSMutableArray *vanligArray = [[NSMutableArray alloc] init];
		// bruk array'et
	}



---



# Et eksempel (header *.h)

.objective-c
	/* Ingen ivars deklarert i .h */
	@interface Contact : NSObject
		@property (nonatomic, strong) NSString *category;
		@property (nonatomic, strong) NSString *firm;
		@property (nonatomic, strong) NSString *phoneNumber;
		@property (nonatomic, strong) NSString *url;

		- (void)someMethod;
		- (BOOL)someOtherMethod:(NSString *)string andAnotherParameter:(BOOL)bool;
	@end

---

# Et eksempel (implementation *.m)

.objective-c
	@implementation Contact
		// @synthesize er ikke lenger nødvendig i Xcode 4.5, 
		// da det blir automatisk laget for alle @property 
		@synthesize category;
		@synthesize firm;
		@synthesize phoneNumber;
		@synthesize url;

		- (void)someMethod
		{

		}

		- (BOOL)someOtherMethod:(NSString *)string andAnotherParameter:(BOOL)bool
		{
			/*  Legg merke til at boolean bruker YES og NO i stedet 
			    for true eller false som i mange andre språk */

			return YES;
		}

		- (void)somePrivateMethod
		{
			//I nyeste Xcode spesifiserer man ikke private metoder
		}
	@end

---

.middle.center
# En liten pause?


---

.middle.center
# Introduksjon iOS

---

# iOS familien

.max-width
![](images/ios-devices.png)

---

# Designvurderinger (alt for kort oppsummert) ;)

* [iOS Human Interface Guidelines (http://goo.gl/SEJDc)](http://goo.gl/SEJDc) 
* Nettverksproblemer (4G, 3G, EDGE, INGENTING)
* Hva kan de forskjellige iOS-enhetene gjøre (GPS, kamera, telefon, osv)
* Hvilke utfordringer gir mobilutvikling (liten skjerm osv)
* Tenk frem i tid, for eksempel hva slags skjermer ser vi for oss at appen må støtte

---

# Mockup verktøy og GUI stuff

* Forskjellig verktøy som kan vœre greit å leke med når man har lyst å utvikle en applikasjon
	* [Penn og papir (http://www.uistencils.com/)](http://www.uistencils.com/) 
	* [Digitalt forskjellig (http://keynotopia.com/)](http://keynotopia.com/)
	* [Adobe Photoshop og Adobe Illustrator (http://www.teehanlax.com/downloads/)](http://www.teehanlax.com/downloads/)

---

# iOS - Layers


.max-width
![Lag inndeling og rammeverk i iOS](images/layers.png)

---

.middle.center
# Verktøy

---

# Xcode

.round
![Programmet som er mest vanlig å bruke til Objetice-C koding](images/xcode.png)

---

# iOS Simulator

.round
![Viser applikasjonen i en iPhone/iPad simulator. Kan brukes til å teste forskjellige iOS versjoner](images/simulator.png)

---

# Interface Builder

.round
![Kan brukes til å designe appen ved å legge ut GUI elementer og koble disse til kode](images/interfacebuilder.png)

---

# Interface Builder - IBActions &amp; IBOutlet
###IBActions


.objective-c
	- (IBAction)myFancyFunction:(id)sender

Knytter en handling til en funksjon

###IBOutlets


.objective-c
	@property(nonatomic, strong) IBOutlet UIButton *myButton

Knytter et UI-element opp mot en variabel

---

# Intruments

.round
![Brukes blant annet til å analysere applikasjoner, finne flaskehalser og forbedre ytelse.](images/intruments.png)

---

.middle.center
# En liten pause?

---

.middle.center
# Lets code!

## Hjelp og demo på skjerm

---

# Hei på dere-appen

1. Lag en app som skriver "Hei på dere" ut i consolet
2. Lag en app uten interface builder som legger ut en UILabel og viser "Hei på dere"
3. Lag en app med interface builder som viser en UILabel med "Hei på dere"

---

# Vis hva jeg skriver appen
1. Lag en app med eller uten interface builder som har en UIButton, UITextField og en UILabel. UILabel skal vise det som står i UITextField når man trykker på knappen.

---

# Den enkle browserappen
1. Lag en app med knapper eller UIPickerView som henviser til websider, når man klikker på knappen så vises den websiden i en UIWebView

---

.middle.center
# Del 2

---

.agenda
# Agenda
* Objective-C
* iOS - Standard komponenter
* Koding - Vi skal lage en twitter-aktig app

---

.middle.center
# Objective-C

---

# Arv

* Man kan arve fra én klasse for å gi din klasse de egenskapene den klassen du arver fra har. Rootklassen i Objective-C kalles NSObject.
* Arv spesifiseres i headerfilen, på samme plass som man navngir klassen sin.



.objective-c
	#import "Shape.h"

	@interface Circle : Shape {
		int radius;
	}

	- (float)computeArea;
	@end



* `super` brukes for å sende bedskjeder til klassen man arver fra

---

# Delegates

* Design pattern for å få et objekt til å delegere deler av sine oppgaver til et annet objekt.



.objective-c
	- (void)showAlertView {
		UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Advarsel"
			message:@"Beskjed"
			delegate:self // <-- Setter oss selv som delegate på UIAlertViewet
			cancelButtonTitle:@"Ok"
			otherButtonTitles:nil];
		[alert show];
	}

	// UIAlertView vises, og kjører følgende kode når man trykker på en knapp
	if ([_delegate respondsToSelector:@selector(alertView:clickedButtonAtIndex:)]) {
		// Kaller funksjonen alertView:clickedButtonAtIndex: på delegatet
        [_delegate alertView:self clickedButtonAtIndex:buttonIndex]; 
    }

    // Her har vi implementert funksjonen alertView:clickedButtonAtIndex:
    // og får derfor et kall fra UIAlertViewet om hva som ble trykket på
	- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
		NSLog(@"Trykket på en knapp!");
	}


---

# Protocols

* Kan brukes til blant annet
	* Lage et interface for en klasse, og skjule selve implementasjonen
	* Spesifisere funksjoner man forventer at et delegat skal implementere



.objective-c
	@protocol MyFancyProtocol
	@required
	- (void)doThis;
	@optional
	- (void)maybeDoThat;
	@end

	/* MyClass må implementere doThis, og kan implementere maybeDoThat */
	@interface MyClass : NSObject <MyFancyProtocol> {}
	@end

	/* Hvilken som helst klasse som implementerer MyFancyProtocol kan settes som delegate */
	@interface MyOtherClass : NSObject {
		id<MyFancyProtocol> delegate;
	}
	@end


---

# Categories

* Categories brukes for å legge nye funksjoner til eksisterende klasser, og er et alternativ til arv. 
* En category vil kjøre som en del av klassen, og ha tilgang til self.



.objective-c
	@interface NSString (MyCategory)

	- (BOOL)isEmptyString;
	
	@end

	@implementation NSString (MyCategory)

	- (BOOL)isEmptyString {
		/* implementation.. */
	}

	@end

---

# Selectors

* Referere til en metode med ett unikt navn.
* Ligner på funksjonspekere, som foreksempel brukes i javascript
* De er av typen SEL, og den kan brukes til å invoke en metode på et objekt. 
* @selector() brukes til å lage en SEL



.objetive-c
	SEL enMetode;
	enMetode = @selector(enMetode:medMer:);



.objective-c
	[venn performSelector:@selector(sladre:) withObject:enNabo];

    //er det samme som
    [venn sladre:enNabo];

* Forskjellen på ett vanlig metode kall er at man kan variere beskjeden og objektet som motar beskjeden runtime, da de ikke er tett knyttet sammen under kompilering. 

---

# Exception Handling

* Gjøres likt som i alle andre programmeringsspråk, men brukes skjelden. De fleste bruker NSError i stedet. 



.objective-c
	Venn *venn = [[Venn alloc] init];
 
	@try 
	{
	    [venn sladre];
	}
	@catch (NSException *exception) 
	{
	    NSLog(@"Feilet %@: %@", [exception name], [exception reason]);
	}

---

# Threading
Objective-C gir oss flere forskjellige måter å lage tråder på, her har vi tre forskjellige

* NSThread gir oss muligheten til å kjøre en selector i en ny tråd



.objective-c
	[NSThread detachNewThreadSelector:
		@selector(startBakgrunnsJobb) toTarget:self withObject:nil];  
    
* `dispatch_async()` er en del av GCD (Grand Central Dispatch), som er et rammeverk for å gjøre jobber samtidig. dispatch_async er en metode man kan kalle med en block og brukes ofte der man ønsker å kjøre små kodeblokker asynkrone.
* NSOperationQueue og NSOperation - Wrapper objekter til GCD for å forenkle threading i Objective-C, kan for eksempel lage oppgave klasser som arver av NSOperation og legge disse på NSOperationQueue


---

# Blocks

* Minner mye om closures, og brukes ofte for å
	* kunne kjøre små kodeblokker samtidig
	* iterere over objekter i et array
	* kjøre kode som et callback
* Man definerer en block med `.objective-c ^{ /*min fine block*/ }`, og alt inne i blocken kan referere til variabler på utsiden
* `__block` brukes der man skal kunne sette variabler utenfor en block på insiden av en block



.objective-c
	NSArray *mySortedArray = [myArray sortedArrayUsingComparator:
	^(id first, id second) {
		if (first.myCoolValue > second.myCoolValue)
			return NSOrderedAscending;
		...
	}];

---

# Object Literals

* Apple LLVM Compiler heter Apple sin compiler, altså den som komplierer til binœr kode
* Fra og med 4.0 har man fått mange nye features og forenklinger av språket, da blant annet object literals.

---

## NSNumber Literals



.objective-c
	@12 // [NSNumber numberWithInt:12]
	@'Z' // [NSNumber numberWithChar:'Z']
	@YES // [NSNumber numberWithBool:YES]


## Boxed Expression Literals (C kall)



.objective-c
	@(M_PI/16) // [NSNumber numberWithDouble:(M_PI / 16)]

---

## Container Literals



.objective-c
	NSArray *array = @[ @"Hello", @"Wellow", @"Cool" ]; 

	/*
	NSArray arrayWithObjects:@"Hello", @"Wellow", @"Cool", nil];
	*/
	
	NSDictionary *dictionary = @{
		@"firstname" : @"Foo",
		@"lastname" : @"Bar",
	};

	/* 
	NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
		@"value1", @"key1", @"value2", @"key2", nil];
	*/


---

.middle.center
#iOS - Standard komponenter

---

#ViewController

.round.max-height
![alternativ](images/viewcontroller.png)

---


#TableViewController og TableView

.round.max-height
![alternativ](images/tableviewcontroller.png)

---

#Navigation Controller

.round.max-height
![alternativ](images/navigationcontroller.png)

---

.middle.center
# Lets code!
## Twitter aktig app

Du finner en ferdig hjelpe klasse for å laste ned (GET) og sende data (POST) til serveren. Klassen kan lastes ned fra: URL 

---

.middle.center
# Del 3

---

.agenda
# Agenda
* iOS - Standard komponenter
* Debugging
* Verktøy og testing, alternativer og forslag
* Bøker og ressurser
* Utvikle på egen app eller forsette med twitter klone med hjelp fra veilederne

---

.middle.center
#iOS - Standard komponenter

---

#Tab Bar Controller og tabbar

.round.max-height
![alternativ](images/tabbarcontroller.png)

---

#CollectionViewController og CollectionView

.round.max-height
![alternativ](images/collectionviewcontroller.png)

---

.middle.center
#Debug time!
## Demo av hvordan debugge i Xcode

---

.middle.center
# Verktøy og testing, alternativer og forslag

---

# Testing
* Dette kurset har ikke tatt for seg testing av dine iOS apper, her er noen forslag til rammeverk og ressourcer
	* UIAutomation
		* [Blogg post (goo.gl/BwhF5)](goo.gl/BwhF5)
	* Unit test
		* [GHUnut (goo.gl/xkV7H)](goo.gl/xkV7H)
		* [OCMock (goo.gl/RUHec)](goo.gl/RUHec)
		* [Blogg post (goo.gl/baEUq)](goo.gl/baEUq)

---

# IDE

* JetBrains AppCode - Et alternativ IDE til Xcode
* Accessorizer - Effektivieringsverktøy som suplementerer Xcode. Kan blant annet generere mer enn 40 forskjellige kodesnutter. 

---

# App salg

Følg med på App salg, rangering og kommentarer

* App Viz - Mac app
* App Annie - Web
* App Figures - Web

---

# Generelle Apps

* Key Codes - Verktøy for å vise tilgjengelige snarveier i OSX
* Sip - Finn fargekoden for en farge på skjermen din

---

.middle.center
# Forslag til bøker og ressurser

---

## Bøker 
* Cocoa Programming for MAC OS X
* Beginning iPhone Development
* iPhone Programming - The big nerd ranch guide
* Cocoa Design Patterns

## Linker
* [iOS Developer Library (http://goo.gl/lwznv)](http://goo.gl/lwznv)
* [Standford (http://goo.gl/rIHvu)](http://goo.gl/rIHvu)
* [Coding Guidelines (http://goo.gl/mfE1P)](http://goo.gl/mfE1P)

---

.middle.center
# Lets code!

---

.middle.center
# Takk for oss

    </textarea>
    <div id="slideshow"></div>
  </body>
</html>